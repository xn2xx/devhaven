## 1. 技术调研与准备

- [ ] 1.1 调研 xterm.js + portable-pty + tmux 方案的集成路径
- [ ] 1.2 验证 macOS/Linux/Windows 平台的 PTY 与 tmux 可用性
- [ ] 1.3 确定终端通信通道（PTY、事件通道或其他）
- [ ] 1.4 评估性能影响（内存、CPU）和多实例限制

## 2. 架构设计

- [ ] 2.1 设计开发模式 UI 布局（标签页 + 终端区域）
- [ ] 2.2 定义前后端通信 API（启动终端、切换会话、关闭会话）
- [ ] 2.3 设计会话持久化方案（可选功能）
- [ ] 2.4 设计模式切换机制（gallery-mode ↔ workspace-mode）

## 3. 后端实现（Tauri）

- [ ] 3.1 集成 portable-pty 依赖并封装 PTY 适配层
- [ ] 3.2 实现终端进程管理模块 `terminal.rs`
  - [ ] 3.2.1 启动终端进程并绑定项目目录
  - [ ] 3.2.2 维护活跃会话列表
  - [ ] 3.2.3 处理进程退出和清理
  - [ ] 3.2.4 维护 tmux 会话与项目的映射（单项目单会话）
  - [ ] 3.2.5 启动前检测 tmux 是否可用并给出提示
- [ ] 3.3 实现 Tauri 命令
  - [ ] 3.3.1 `create_terminal_session(project_path)` - 创建新会话
  - [ ] 3.3.2 `close_terminal_session(session_id)` - 关闭会话
  - [ ] 3.3.3 `list_terminal_sessions()` - 列出活跃会话
- [ ] 3.4 处理窗口嵌入/通信（如果使用嵌入方案）

## 4. 前端实现（React）

- [ ] 4.1 创建 `WorkspaceView` 组件
  - [ ] 4.1.1 实现标签页栏 `TabBar`
  - [ ] 4.1.2 实现终端容器 `TerminalContainer`
- [ ] 4.1.3 处理标签切换、关闭
- [ ] 4.2 创建 `terminal.ts` 服务
  - [ ] 4.2.1 调用 Tauri 命令创建/关闭会话
  - [ ] 4.2.2 管理前端会话状态
- [ ] 4.3 修改 `App.tsx`
  - [ ] 4.3.1 添加模式状态（gallery | workspace）
  - [ ] 4.3.2 实现双击项目卡片进入 workspace 模式
  - [ ] 4.3.3 添加返回按钮退出 workspace 模式
- [ ] 4.4 设计和实现开发模式 UI/UX
  - [ ] 4.4.1 设计标签页样式
  - [ ] 4.4.2 设计终端区域样式
  - [ ] 4.4.3 设计模式切换动画

## 5. 集成与测试

- [ ] 5.1 端到端测试：启动应用 → 双击项目 → 验证终端可用
- [ ] 5.2 测试多项目标签页切换
- [ ] 5.3 测试会话关闭和资源清理
- [ ] 5.4 测试模式切换的状态保持
- [ ] 5.5 跨平台测试（macOS、Linux、Windows）

## 6. 文档与发布

- [ ] 6.1 更新 README 说明开发模式功能
- [ ] 6.2 添加用户指南：如何使用集成终端
- [ ] 6.3 更新依赖文档（xterm.js/portable-pty 说明）
- [ ] 6.4 准备 Release Notes
- [ ] 6.5 更新版本号（breaking change: 2.0.2）
