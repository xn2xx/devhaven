# Change: Codex 会话监控事件驱动刷新

## Why

CLI 监控当前依赖高频轮询，仍可能在会话开始/结束/中断时出现感知延迟，且轮询成本较高。引入文件监听并在变更时推送更新，可降低延迟并减少无效刷新。（￣▽￣）

## What Changes

- 后端监听 ~/.codex/sessions 的文件变更，发生新增/修改/删除时主动推送会话摘要
- 前端订阅会话更新事件并立即更新 UI
- 仍保留低频轮询作为兜底，避免监听异常导致状态停滞
- 增加简单的防抖/节流以避免事件风暴

## Impact

### 影响的能力规范
- **修改**：cli-session-monitoring - 实时对话刷新

### 影响的代码模块
- **后端**：
  - src-tauri/src/codex_sessions.rs 新增文件监听与事件推送
  - src-tauri/src/lib.rs 在应用启动时注册监听
- **前端**：
  - src/services/codex.ts 新增事件常量
  - src/hooks/useCodexSessions.ts 订阅事件并降低轮询频率

### 风险评估
- **监听可靠性**：不同平台的文件事件语义不一致
- **事件风暴**：写入频繁时需进行防抖合并
- **状态一致性**：监听失败时需确保轮询兜底可用
